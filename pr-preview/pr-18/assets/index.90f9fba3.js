import{_ as se,a as j,p as oe,i as ie,r as d,u as le,g as O,b as _,s as S,c as ne,d as u,e as B,f as V,h as F,j as s,k as E,l as ce,B as de,m as ue,n as w,o as pe,q as me,t as ge,v as p,w as T,L as he,T as fe,x as ve,F as H,y as q,A as D,z as ye,C as N,D as R,E as be,G as A,H as Q,I as _e,J as xe,S as Ce,O as Ie,K as Se,M as Ae}from"./index.83f6fe9e.js";import{L as J,B as Me,C as $e,F as Pe,I as Ne,S as Te,a as we,b as ke,T as Le,c as Re}from"./TextField.6ae38ea0.js";const Oe=["sx"],Be=e=>{const t={systemProps:{},otherProps:{}};return Object.keys(e).forEach(a=>{oe[a]?t.systemProps[a]=e[a]:t.otherProps[a]=e[a]}),t};function Ve(e){const{sx:t}=e,a=se(e,Oe),{systemProps:r,otherProps:l}=Be(a);let n;return Array.isArray(t)?n=[r,...t]:typeof t=="function"?n=(...i)=>{const o=t(...i);return ie(o)?j({},r,o):r}:n=j({},r,t),j({},l,{sx:n})}const Fe=300,Ee=e=>{const[t,a]=d.exports.useState(e),[r,l]=d.exports.useState("");return d.exports.useEffect(()=>{const n=setTimeout(()=>{l(t)},Fe);return()=>{clearTimeout(n)}},[t]),{debounceValue:r,inputValue:t,setInputValue:a}},U=()=>{const[e,t]=le(),a=()=>{let n={};return e.forEach((i,o)=>{n={...n,[o]:i}}),n},r={get(n){return e.get(n)},set(n,i){i===""||i==null?e.delete(n):e.set(n,i),t(e)},delete(n){e.delete(n),t(e)}},l=n=>({set(i){r.set(n,i)},delete(){r.delete(n)},get(){return r.get(n)}});return{currentQueryParams:a(),queryMethods:r,searchParams:e,getQueryMethodWithKey:l}},De=(e,t,a)=>{const r=d.exports.useRef(0);d.exports.useEffect(()=>{if(r.current<e){r.current++;return}t()},a)};function Ue(e){return O("MuiTypography",e)}_("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const je=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],Qe=e=>{const{align:t,gutterBottom:a,noWrap:r,paragraph:l,variant:n,classes:i}=e,o={root:["root",n,e.align!=="inherit"&&`align${ne(t)}`,a&&"gutterBottom",r&&"noWrap",l&&"paragraph"]};return F(o,Ue,i)},We=S("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.variant&&t[a.variant],a.align!=="inherit"&&t[`align${ne(a.align)}`],a.noWrap&&t.noWrap,a.gutterBottom&&t.gutterBottom,a.paragraph&&t.paragraph]}})(({theme:e,ownerState:t})=>u({margin:0},t.variant&&e.typography[t.variant],t.align!=="inherit"&&{textAlign:t.align},t.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t.gutterBottom&&{marginBottom:"0.35em"},t.paragraph&&{marginBottom:16})),K={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},ze={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},Ge=e=>ze[e]||e,He=d.exports.forwardRef(function(t,a){const r=B({props:t,name:"MuiTypography"}),l=Ge(r.color),n=Ve(u({},r,{color:l})),{align:i="inherit",className:o,component:c,gutterBottom:h=!1,noWrap:v=!1,paragraph:g=!1,variant:y="body1",variantMapping:x=K}=n,m=V(n,je),f=u({},n,{align:i,color:l,className:o,component:c,gutterBottom:h,noWrap:v,paragraph:g,variant:y,variantMapping:x}),C=c||(g?"p":x[y]||K[y])||"span",b=Qe(f);return s(We,u({as:C,ref:a,ownerState:f,className:E(b.root,o)},m))});var k=He,qe=ce(s("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function Je(e){return O("MuiAvatar",e)}_("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const Ke=["alt","children","className","component","imgProps","sizes","src","srcSet","variant"],Xe=e=>{const{classes:t,variant:a,colorDefault:r}=e;return F({root:["root",a,r&&"colorDefault"],img:["img"],fallback:["fallback"]},Je,t)},Ye=S("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,t[a.variant],a.colorDefault&&t.colorDefault]}})(({theme:e,ownerState:t})=>u({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none"},t.variant==="rounded"&&{borderRadius:(e.vars||e).shape.borderRadius},t.variant==="square"&&{borderRadius:0},t.colorDefault&&u({color:(e.vars||e).palette.background.default},e.vars?{backgroundColor:e.vars.palette.Avatar.defaultBg}:{backgroundColor:e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[600]}))),Ze=S("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(e,t)=>t.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),et=S(qe,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(e,t)=>t.fallback})({width:"75%",height:"75%"});function tt({crossOrigin:e,referrerPolicy:t,src:a,srcSet:r}){const[l,n]=d.exports.useState(!1);return d.exports.useEffect(()=>{if(!a&&!r)return;n(!1);let i=!0;const o=new Image;return o.onload=()=>{!i||n("loaded")},o.onerror=()=>{!i||n("error")},o.crossOrigin=e,o.referrerPolicy=t,o.src=a,r&&(o.srcset=r),()=>{i=!1}},[e,t,a,r]),l}const at=d.exports.forwardRef(function(t,a){const r=B({props:t,name:"MuiAvatar"}),{alt:l,children:n,className:i,component:o="div",imgProps:c,sizes:h,src:v,srcSet:g,variant:y="circular"}=r,x=V(r,Ke);let m=null;const f=tt(u({},c,{src:v,srcSet:g})),C=v||g,b=C&&f!=="error",M=u({},r,{colorDefault:!b,component:o,variant:y}),I=Xe(M);return b?m=s(Ze,u({alt:l,src:v,srcSet:g,sizes:h,ownerState:M,className:I.img},c)):n!=null?m=n:C&&l?m=l[0]:m=s(et,{className:I.fallback}),s(Ye,u({as:o,ownerState:M,className:E(I.root,i),ref:a},x,{children:m}))});var X=at;function rt(e){return O("MuiCardContent",e)}_("MuiCardContent",["root"]);const nt=["className","component"],st=e=>{const{classes:t}=e;return F({root:["root"]},rt,t)},ot=S("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),it=d.exports.forwardRef(function(t,a){const r=B({props:t,name:"MuiCardContent"}),{className:l,component:n="div"}=r,i=V(r,nt),o=u({},r,{component:n}),c=st(o);return s(ot,u({as:n,className:E(c.root,l),ownerState:o,ref:a},i))});var lt=it;const ct=_("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);var Y=ct;const dt=_("MuiListItemIcon",["root","alignItemsFlexStart"]);var Z=dt;const ut=_("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);var ee=ut;function pt(e){return O("MuiMenuItem",e)}const mt=_("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]);var $=mt;const gt=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex"],ht=(e,t)=>{const{ownerState:a}=e;return[t.root,a.dense&&t.dense,a.divider&&t.divider,!a.disableGutters&&t.gutters]},ft=e=>{const{disabled:t,dense:a,divider:r,disableGutters:l,selected:n,classes:i}=e,c=F({root:["root",a&&"dense",t&&"disabled",!l&&"gutters",r&&"divider",n&&"selected"]},pt,i);return u({},i,c)},vt=S(de,{shouldForwardProp:e=>ue(e)||e==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:ht})(({theme:e,ownerState:t})=>u({},e.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${$.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:w(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${$.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:w(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${$.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:w(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:w(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${$.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${$.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${Y.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${Y.inset}`]:{marginLeft:52},[`& .${ee.root}`]:{marginTop:0,marginBottom:0},[`& .${ee.inset}`]:{paddingLeft:36},[`& .${Z.root}`]:{minWidth:36}},!t.dense&&{[e.breakpoints.up("sm")]:{minHeight:"auto"}},t.dense&&u({minHeight:32,paddingTop:4,paddingBottom:4},e.typography.body2,{[`& .${Z.root} svg`]:{fontSize:"1.25rem"}}))),yt=d.exports.forwardRef(function(t,a){const r=B({props:t,name:"MuiMenuItem"}),{autoFocus:l=!1,component:n="li",dense:i=!1,divider:o=!1,disableGutters:c=!1,focusVisibleClassName:h,role:v="menuitem",tabIndex:g}=r,y=V(r,gt),x=d.exports.useContext(J),m={dense:i||x.dense||!1,disableGutters:c},f=d.exports.useRef(null);pe(()=>{l&&f.current&&f.current.focus()},[l]);const C=u({},r,{dense:m.dense,divider:o,disableGutters:c}),b=ft(r),M=me(f,a);let I;return r.disabled||(I=g!==void 0?g:-1),s(J.Provider,{value:m,children:s(vt,u({ref:M,role:v,tabIndex:I,component:n,focusVisibleClassName:E(b.focusVisible,h)},y,{ownerState:C,classes:b}))})});var te=yt;const ae=({isBackdropLoading:e=!0})=>{const t=s($e,{color:"inherit"});return e?s(Me,{sx:{zIndex:2},open:!0,children:t}):s("div",{className:ge.loading,children:t})},G=({list:e,onChangeSideEffect:t,...a})=>{const r=()=>a.defaultValue!=null?(a.multiple,a.defaultValue):a.multiple?[]:"",[l,n]=d.exports.useState(r),i=o=>{const c=o.target.value;if(t?.(c),a.multiple){n(c);return}n(c)};return p(Pe,{fullWidth:!0,children:[s(Ne,{id:`select-${a.id}`,children:a.label}),p(Te,{...a,value:l,labelId:`select-${a.id}`,sx:{width:"100%"},onChange:i,children:[e.map((o,c)=>s(te,{value:o.value,children:o.text??o.value},c)),!a.multiple&&s(te,{value:"",children:s("em",{children:"None"})})]})]})},bt="_header_1v0tx_1",_t="_header__link_1v0tx_13",xt="_header__wrapper_1v0tx_19";var W={header:bt,header__link:_t,header__wrapper:xt};const Ct=()=>{const e=T(),t=async()=>{await fe.remove(),e(ve(!1))};return s("div",{className:W.header,children:p("div",{className:W.header__wrapper,children:[s(he,{className:W.header__link,to:"/",children:"Home"}),s(we,{variant:"contained",color:"secondary",onClick:t,children:"Log out"})]})})};var It={"default-layout":"_default-layout_rv8pr_1"};const St=({children:e})=>p(H,{children:[s(Ct,{}),s("div",{className:It["default-layout"],children:e})]}),At=Object.values(q).filter(e=>e!==q.Default).map(e=>({value:e})),Mt=()=>{const{queryMethods:e,currentQueryParams:t}=U(),a=T(),r=D.fromUrl(t),l=n=>{const i=n,o=i.map(c=>ye.typeModelToDto[c]).join(",");e.set("types",o),a(N(new R({...r,types:i})))};return s(H,{children:s(G,{id:"anime-filter",multiple:!0,defaultValue:r.types,label:"Filter by types",onChangeSideEffect:l,list:At})})},{selectAll:$t}=be.getSelectors(),Pt=A(e=>$t(e.anime),e=>e),Nt=A(e=>e.anime.isLoading,e=>e);A(e=>e.auth.isAuthorized,e=>e);A(e=>e.anime.totalItems,e=>e);const Tt=A(e=>e.anime.nextPageUrl,e=>e),wt=A(e=>e.anime.isLoadingNextPage,e=>e);var kt="/camp-js-2022-khoa-nguyen/pr-preview/pr-18/assets/fallback-avatar.4d92921c.jpg";const Lt={FallbackAvatar:kt};var P={"anime-item":"_anime-item_tf0g2_1","anime-item__thumb":"_anime-item__thumb_tf0g2_8","anime-item__wrapper":"_anime-item__wrapper_tf0g2_16","anime-item__content":"_anime-item__content_tf0g2_21"};const L=e=>e??"--",re=({data:e})=>s(ke,{className:P["anime-item__wrapper"],children:p(lt,{className:P["anime-item"],children:[e.image==null&&s(X,{alt:e.titleEnglish,src:Lt.FallbackAvatar,className:P["anime-item__thumb"]}),e.image&&s(X,{alt:e.titleEnglish,src:e.image,className:P["anime-item__thumb"]}),p("div",{className:P["anime-item__content"],children:[s(k,{children:L(e.titleJapan)}),s(k,{children:L(e.titleEnglish)}),p(k,{children:["Status: ",L(e.status)]}),p(k,{children:["Type: ",L(e.type)]})]})]})});var Rt={"anime-item":"_anime-item_dkuyb_1"};const Ot={root:null,rootMargin:"30px",threshold:.2},Bt=()=>{const e=d.exports.useRef(null),t=Q(Nt),a=T(),r=Q(Tt),l=_e(Pt),{currentQueryParams:n}=U(),i=Q(wt);d.exports.useEffect(()=>{const c=D.fromUrl(n);a(N(c))},[]);const o=c=>{c[0].isIntersecting&&r&&a(xe(r))};return d.exports.useEffect(()=>{const c=new IntersectionObserver(o,Ot);return e.current&&c.observe(e.current),()=>{c.disconnect()}},[o]),t?s(ae,{isBackdropLoading:!1}):l.length===0?s("div",{children:"There is no result"}):p(H,{children:[l?.map((c,h)=>h===l.length-1?s("div",{ref:e,className:Rt["anime-item"],children:s(re,{data:c})},c.id):s(re,{data:c},c.id)),i&&s(ae,{isBackdropLoading:!1})]})},Vt=d.exports.memo(Bt);var Ft={"anime-search__input":"_anime-search__input_1g9xt_1"};const Et=()=>{const{currentQueryParams:e,getQueryMethodWithKey:t}=U(),a=t("search"),{inputValue:r,setInputValue:l,debounceValue:n}=Ee(a.get()??""),i=c=>{l(c.target.value)},o=T();return De(1,()=>{a.set(n);const c=D.fromUrl(e);o(N(new R({...c,search:n})))},[n]),s("div",{children:s(Le,{value:r,onChange:i,className:Ft["anime-search__input"],placeholder:"e.g.Naruto, ...",type:"search"})})},Dt=d.exports.memo(Et);var Ut={"anime-sorting":"_anime-sorting_bbp2x_1"};const jt=Object.values(Ce).map(e=>({value:e})),Qt=Object.values(Ie).map(e=>({value:e})),Wt=()=>{const{currentQueryParams:e,queryMethods:t}=U(),a=T(),r=D.fromUrl(e),l=i=>{const o=i;t.set("sorting",Se.toUrl(o)),a(N(new R({...r,sorting:o})))},n=i=>{const o=i;t.set("ordering",o),a(N(new R({...r,ordering:o})))};return p("div",{className:Ut["anime-sorting"],children:[s(G,{defaultValue:r.sorting,onChangeSideEffect:l,id:"sort-anime",label:"Sort by",list:jt}),s(G,{defaultValue:r.ordering,onChangeSideEffect:n,id:"order-anime",label:"Order by",list:Qt})]})};var zt={"anime-sidebar":"_anime-sidebar_141r8_1"};const Gt=()=>p(Re,{component:"aside",sx:{padding:"10px"},className:zt["anime-sidebar"],children:[s(Ae,{listTab:[{label:"Search",panel:s(Dt,{})},{label:"Filter",panel:s(Mt,{})},{label:"Sorting",panel:s(Wt,{})}]}),s(Vt,{})]}),Ht=d.exports.memo(Gt);var z={"anime-table":"_anime-table_1sw7u_1"};const qt=()=>s(St,{children:p("div",{className:z["anime-table"],children:[s("div",{className:z["anime-table__sidebar"],children:s(Ht,{})}),s("div",{className:z["anime-table__content"],children:s("h1",{children:"Place holder for next implementation"})})]})}),Xt=d.exports.memo(qt);export{Xt as AnimeTablePage,qt as AnimeTablePageInner};
