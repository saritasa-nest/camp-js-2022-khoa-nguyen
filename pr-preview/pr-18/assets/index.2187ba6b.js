import{_ as se,a as j,p as oe,i as ie,r as d,u as le,g as O,b as _,s as S,c as ne,d as u,e as B,f as V,h as F,j as s,k as E,l as ce,B as de,m as ue,n as w,o as pe,q as me,t as ge,v as m,w as T,L as he,T as fe,x as ve,F as H,y as q,A as D,z as ye,C as N,D as R,E as be,G as A,H as Q,I as _e,J as xe,S as Ce,O as Ie,K as Se,M as Ae}from"./index.f86ff4ec.js";import{L as J,B as Me,C as $e,F as Pe,I as Ne,S as Te,a as we,b as ke,T as Le,c as Re}from"./TextField.28869e41.js";const Oe=["sx"],Be=e=>{const t={systemProps:{},otherProps:{}};return Object.keys(e).forEach(r=>{oe[r]?t.systemProps[r]=e[r]:t.otherProps[r]=e[r]}),t};function Ve(e){const{sx:t}=e,r=se(e,Oe),{systemProps:a,otherProps:l}=Be(r);let n;return Array.isArray(t)?n=[a,...t]:typeof t=="function"?n=(...o)=>{const i=t(...o);return ie(i)?j({},a,i):a}:n=j({},a,t),j({},l,{sx:n})}const Fe=300,Ee=e=>{const[t,r]=d.exports.useState(e),[a,l]=d.exports.useState("");return d.exports.useEffect(()=>{const n=setTimeout(()=>{l(t)},Fe);return()=>{clearTimeout(n)}},[t]),{debounceValue:a,inputValue:t,setInputValue:r}},U=()=>{const[e,t]=le(),r=()=>{let n={};return e.forEach((o,i)=>{n={...n,[i]:o}}),n},a={get(n){return e.get(n)},set(n,o){o===""||o==null?e.delete(n):e.set(n,o),t(e)},delete(n){e.delete(n),t(e)}},l=n=>({set(o){a.set(n,o)},delete(){a.delete(n)},get(){return a.get(n)}});return{currentQueryParams:r(),queryMethods:a,searchParams:e,getQueryMethodWithKey:l}},De=(e,t,r)=>{const a=d.exports.useRef(0);d.exports.useEffect(()=>{if(a.current<e){a.current++;return}t()},r)};function Ue(e){return O("MuiTypography",e)}_("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const je=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],Qe=e=>{const{align:t,gutterBottom:r,noWrap:a,paragraph:l,variant:n,classes:o}=e,i={root:["root",n,e.align!=="inherit"&&`align${ne(t)}`,r&&"gutterBottom",a&&"noWrap",l&&"paragraph"]};return F(i,Ue,o)},We=S("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.variant&&t[r.variant],r.align!=="inherit"&&t[`align${ne(r.align)}`],r.noWrap&&t.noWrap,r.gutterBottom&&t.gutterBottom,r.paragraph&&t.paragraph]}})(({theme:e,ownerState:t})=>u({margin:0},t.variant&&e.typography[t.variant],t.align!=="inherit"&&{textAlign:t.align},t.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},t.gutterBottom&&{marginBottom:"0.35em"},t.paragraph&&{marginBottom:16})),K={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},ze={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},Ge=e=>ze[e]||e,He=d.exports.forwardRef(function(t,r){const a=B({props:t,name:"MuiTypography"}),l=Ge(a.color),n=Ve(u({},a,{color:l})),{align:o="inherit",className:i,component:c,gutterBottom:p=!1,noWrap:v=!1,paragraph:h=!1,variant:y="body1",variantMapping:x=K}=n,g=V(n,je),f=u({},n,{align:o,color:l,className:i,component:c,gutterBottom:p,noWrap:v,paragraph:h,variant:y,variantMapping:x}),C=c||(h?"p":x[y]||K[y])||"span",b=Qe(f);return s(We,u({as:C,ref:r,ownerState:f,className:E(b.root,i)},g))});var k=He,qe=ce(s("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function Je(e){return O("MuiAvatar",e)}_("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const Ke=["alt","children","className","component","imgProps","sizes","src","srcSet","variant"],Xe=e=>{const{classes:t,variant:r,colorDefault:a}=e;return F({root:["root",r,a&&"colorDefault"],img:["img"],fallback:["fallback"]},Je,t)},Ye=S("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,t[r.variant],r.colorDefault&&t.colorDefault]}})(({theme:e,ownerState:t})=>u({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none"},t.variant==="rounded"&&{borderRadius:(e.vars||e).shape.borderRadius},t.variant==="square"&&{borderRadius:0},t.colorDefault&&u({color:(e.vars||e).palette.background.default},e.vars?{backgroundColor:e.vars.palette.Avatar.defaultBg}:{backgroundColor:e.palette.mode==="light"?e.palette.grey[400]:e.palette.grey[600]}))),Ze=S("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(e,t)=>t.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),et=S(qe,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(e,t)=>t.fallback})({width:"75%",height:"75%"});function tt({crossOrigin:e,referrerPolicy:t,src:r,srcSet:a}){const[l,n]=d.exports.useState(!1);return d.exports.useEffect(()=>{if(!r&&!a)return;n(!1);let o=!0;const i=new Image;return i.onload=()=>{!o||n("loaded")},i.onerror=()=>{!o||n("error")},i.crossOrigin=e,i.referrerPolicy=t,i.src=r,a&&(i.srcset=a),()=>{o=!1}},[e,t,r,a]),l}const at=d.exports.forwardRef(function(t,r){const a=B({props:t,name:"MuiAvatar"}),{alt:l,children:n,className:o,component:i="div",imgProps:c,sizes:p,src:v,srcSet:h,variant:y="circular"}=a,x=V(a,Ke);let g=null;const f=tt(u({},c,{src:v,srcSet:h})),C=v||h,b=C&&f!=="error",M=u({},a,{colorDefault:!b,component:i,variant:y}),I=Xe(M);return b?g=s(Ze,u({alt:l,src:v,srcSet:h,sizes:p,ownerState:M,className:I.img},c)):n!=null?g=n:C&&l?g=l[0]:g=s(et,{className:I.fallback}),s(Ye,u({as:i,ownerState:M,className:E(I.root,o),ref:r},x,{children:g}))});var X=at;function rt(e){return O("MuiCardContent",e)}_("MuiCardContent",["root"]);const nt=["className","component"],st=e=>{const{classes:t}=e;return F({root:["root"]},rt,t)},ot=S("div",{name:"MuiCardContent",slot:"Root",overridesResolver:(e,t)=>t.root})(()=>({padding:16,"&:last-child":{paddingBottom:24}})),it=d.exports.forwardRef(function(t,r){const a=B({props:t,name:"MuiCardContent"}),{className:l,component:n="div"}=a,o=V(a,nt),i=u({},a,{component:n}),c=st(i);return s(ot,u({as:n,className:E(c.root,l),ownerState:i,ref:r},o))});var lt=it;const ct=_("MuiDivider",["root","absolute","fullWidth","inset","middle","flexItem","light","vertical","withChildren","withChildrenVertical","textAlignRight","textAlignLeft","wrapper","wrapperVertical"]);var Y=ct;const dt=_("MuiListItemIcon",["root","alignItemsFlexStart"]);var Z=dt;const ut=_("MuiListItemText",["root","multiline","dense","inset","primary","secondary"]);var ee=ut;function pt(e){return O("MuiMenuItem",e)}const mt=_("MuiMenuItem",["root","focusVisible","dense","disabled","divider","gutters","selected"]);var $=mt;const gt=["autoFocus","component","dense","divider","disableGutters","focusVisibleClassName","role","tabIndex"],ht=(e,t)=>{const{ownerState:r}=e;return[t.root,r.dense&&t.dense,r.divider&&t.divider,!r.disableGutters&&t.gutters]},ft=e=>{const{disabled:t,dense:r,divider:a,disableGutters:l,selected:n,classes:o}=e,c=F({root:["root",r&&"dense",t&&"disabled",!l&&"gutters",a&&"divider",n&&"selected"]},pt,o);return u({},o,c)},vt=S(de,{shouldForwardProp:e=>ue(e)||e==="classes",name:"MuiMenuItem",slot:"Root",overridesResolver:ht})(({theme:e,ownerState:t})=>u({},e.typography.body1,{display:"flex",justifyContent:"flex-start",alignItems:"center",position:"relative",textDecoration:"none",minHeight:48,paddingTop:6,paddingBottom:6,boxSizing:"border-box",whiteSpace:"nowrap"},!t.disableGutters&&{paddingLeft:16,paddingRight:16},t.divider&&{borderBottom:`1px solid ${(e.vars||e).palette.divider}`,backgroundClip:"padding-box"},{"&:hover":{textDecoration:"none",backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${$.selected}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:w(e.palette.primary.main,e.palette.action.selectedOpacity),[`&.${$.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:w(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)}},[`&.${$.selected}:hover`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:w(e.palette.primary.main,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:e.vars?`rgba(${e.vars.palette.primary.mainChannel} / ${e.vars.palette.action.selectedOpacity})`:w(e.palette.primary.main,e.palette.action.selectedOpacity)}},[`&.${$.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${$.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},[`& + .${Y.root}`]:{marginTop:e.spacing(1),marginBottom:e.spacing(1)},[`& + .${Y.inset}`]:{marginLeft:52},[`& .${ee.root}`]:{marginTop:0,marginBottom:0},[`& .${ee.inset}`]:{paddingLeft:36},[`& .${Z.root}`]:{minWidth:36}},!t.dense&&{[e.breakpoints.up("sm")]:{minHeight:"auto"}},t.dense&&u({minHeight:32,paddingTop:4,paddingBottom:4},e.typography.body2,{[`& .${Z.root} svg`]:{fontSize:"1.25rem"}}))),yt=d.exports.forwardRef(function(t,r){const a=B({props:t,name:"MuiMenuItem"}),{autoFocus:l=!1,component:n="li",dense:o=!1,divider:i=!1,disableGutters:c=!1,focusVisibleClassName:p,role:v="menuitem",tabIndex:h}=a,y=V(a,gt),x=d.exports.useContext(J),g={dense:o||x.dense||!1,disableGutters:c},f=d.exports.useRef(null);pe(()=>{l&&f.current&&f.current.focus()},[l]);const C=u({},a,{dense:g.dense,divider:i,disableGutters:c}),b=ft(a),M=me(f,r);let I;return a.disabled||(I=h!==void 0?h:-1),s(J.Provider,{value:g,children:s(vt,u({ref:M,role:v,tabIndex:I,component:n,focusVisibleClassName:E(b.focusVisible,p)},y,{ownerState:C,classes:b}))})});var te=yt;const ae=({isBackdropLoading:e=!0})=>{const t=s($e,{color:"inherit"});return e?s(Me,{sx:{zIndex:2},open:!0,children:t}):s("div",{className:ge.loading,children:t})},G=({isNoneSelection:e=!1,list:t,onChangeSideEffect:r,...a})=>{const l=()=>a.defaultValue!=null?(a.multiple,a.defaultValue):a.multiple?[]:"",[n,o]=d.exports.useState(l),i=c=>{const p=c.target.value;if(r?.(p),a.multiple){o(p);return}o(p)};return m(Pe,{fullWidth:!0,children:[s(Ne,{id:`select-${a.id}`,children:a.label}),m(Te,{...a,value:n,labelId:`select-${a.id}`,sx:{width:"100%"},onChange:i,children:[t.map((c,p)=>s(te,{value:c.value,children:c.text??c.value},p)),e&&s(te,{value:"",children:s("em",{children:"None"})})]})]})},bt="_header_1v0tx_1",_t="_header__link_1v0tx_13",xt="_header__wrapper_1v0tx_19";var W={header:bt,header__link:_t,header__wrapper:xt};const Ct=()=>{const e=T(),t=async()=>{await fe.remove(),e(ve(!1))};return s("div",{className:W.header,children:m("div",{className:W.header__wrapper,children:[s(he,{className:W.header__link,to:"/",children:"Home"}),s(we,{variant:"contained",color:"secondary",onClick:t,children:"Log out"})]})})};var It={"default-layout":"_default-layout_rv8pr_1"};const St=({children:e})=>m(H,{children:[s(Ct,{}),s("div",{className:It["default-layout"],children:e})]}),At=Object.values(q).filter(e=>e!==q.Default).map(e=>({value:e})),Mt=()=>{const{queryMethods:e,currentQueryParams:t}=U(),r=T(),a=D.fromUrl(t),l=n=>{const o=n,i=o.map(c=>ye.typeModelToDto[c]).join(",");e.set("types",i),r(N(new R({...a,types:o})))};return s(H,{children:s(G,{id:"anime-filter",multiple:!0,defaultValue:a.types,label:"Filter by types",onChangeSideEffect:l,list:At})})},{selectAll:$t}=be.getSelectors(),Pt=A(e=>$t(e.anime),e=>e),Nt=A(e=>e.anime.isLoading,e=>e);A(e=>e.auth.isAuthorized,e=>e);A(e=>e.anime.totalItems,e=>e);const Tt=A(e=>e.anime.nextPageUrl,e=>e),wt=A(e=>e.anime.isLoadingNextPage,e=>e);var kt="/camp-js-2022-khoa-nguyen/pr-preview/pr-18/assets/fallback-avatar.4d92921c.jpg";const Lt={FallbackAvatar:kt};var P={"anime-item":"_anime-item_tf0g2_1","anime-item__thumb":"_anime-item__thumb_tf0g2_8","anime-item__wrapper":"_anime-item__wrapper_tf0g2_16","anime-item__content":"_anime-item__content_tf0g2_21"};const L=e=>e??"--",re=({data:e})=>s(ke,{className:P["anime-item__wrapper"],children:m(lt,{className:P["anime-item"],children:[e.image==null&&s(X,{alt:e.titleEnglish,src:Lt.FallbackAvatar,className:P["anime-item__thumb"]}),e.image&&s(X,{alt:e.titleEnglish,src:e.image,className:P["anime-item__thumb"]}),m("div",{className:P["anime-item__content"],children:[s(k,{children:L(e.titleJapan)}),s(k,{children:L(e.titleEnglish)}),m(k,{children:["Status: ",L(e.status)]}),m(k,{children:["Type: ",L(e.type)]})]})]})});var Rt={"anime-item":"_anime-item_dkuyb_1"};const Ot={root:null,rootMargin:"30px",threshold:.2},Bt=()=>{const e=d.exports.useRef(null),t=Q(Nt),r=T(),a=Q(Tt),l=_e(Pt),{currentQueryParams:n}=U(),o=Q(wt);d.exports.useEffect(()=>{const c=D.fromUrl(n);r(N(c))},[]);const i=c=>{c[0].isIntersecting&&a&&r(xe(a))};return d.exports.useEffect(()=>{const c=new IntersectionObserver(i,Ot);return e.current&&c.observe(e.current),()=>{c.disconnect()}},[i]),t?s(ae,{isBackdropLoading:!1}):l.length===0?s("div",{children:"There is no result"}):m(H,{children:[l?.map((c,p)=>p===l.length-1?s("div",{ref:e,className:Rt["anime-item"],children:s(re,{data:c})},c.id):s(re,{data:c},c.id)),o&&s(ae,{isBackdropLoading:!1})]})},Vt=d.exports.memo(Bt);var Ft={"anime-search__input":"_anime-search__input_1g9xt_1"};const Et=()=>{const{currentQueryParams:e,getQueryMethodWithKey:t}=U(),r=t("search"),{inputValue:a,setInputValue:l,debounceValue:n}=Ee(r.get()??""),o=c=>{l(c.target.value)},i=T();return De(1,()=>{r.set(n);const c=D.fromUrl(e);i(N(new R({...c,search:n})))},[n]),s("div",{children:s(Le,{value:a,onChange:o,className:Ft["anime-search__input"],placeholder:"e.g.Naruto, ...",type:"search"})})},Dt=d.exports.memo(Et);var Ut={"anime-sorting":"_anime-sorting_bbp2x_1"};const jt=Object.values(Ce).map(e=>({value:e})),Qt=Object.values(Ie).map(e=>({value:e})),Wt=()=>{const{currentQueryParams:e,queryMethods:t}=U(),r=T(),a=D.fromUrl(e),l=o=>{const i=o;t.set("sorting",Se.toUrl(i)),r(N(new R({...a,sorting:i})))},n=o=>{const i=o;t.set("ordering",i),r(N(new R({...a,ordering:i})))};return m("div",{className:Ut["anime-sorting"],children:[s(G,{defaultValue:a.sorting,onChangeSideEffect:l,id:"sort-anime",label:"Sort by",isNoneSelection:!0,list:jt}),s(G,{disabled:a.sorting==null,defaultValue:a.ordering,onChangeSideEffect:n,id:"order-anime",label:"Order by",list:Qt})]})};var zt={"anime-sidebar":"_anime-sidebar_141r8_1"};const Gt=()=>m(Re,{component:"aside",sx:{padding:"10px"},className:zt["anime-sidebar"],children:[s(Ae,{listTab:[{label:"Search",panel:s(Dt,{})},{label:"Filter",panel:s(Mt,{})},{label:"Sorting",panel:s(Wt,{})}]}),s(Vt,{})]}),Ht=d.exports.memo(Gt);var z={"anime-table":"_anime-table_1sw7u_1"};const qt=()=>s(St,{children:m("div",{className:z["anime-table"],children:[s("div",{className:z["anime-table__sidebar"],children:s(Ht,{})}),s("div",{className:z["anime-table__content"],children:s("h1",{children:"Place holder for next implementation"})})]})}),Xt=d.exports.memo(qt);export{Xt as AnimeTablePage,qt as AnimeTablePageInner};
