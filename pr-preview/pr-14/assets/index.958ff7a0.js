import{e as E,u as _,f as v,g as A,r as s,h as N,a as r,j as e,L as x,l as y,i as C,H as L}from"./index.1a4b2d94.js";import{c as I,a as d,u as B,s as a,F,b as q,d as u,S as D}from"./auth.module.2e4a87eb.js";import{C as O,B as P}from"./index.180cbbe3.js";const j=I().shape({email:d().email("This field has to be an email!").required("Email is required!"),password:d().required("Password is required!")}),H={isOpen:!1,message:"",duration:3e3},R={email:"",password:""},M=()=>{const p=E(),i=_(),h=v(A),[n,f]=s.exports.useState(!1),[t,l]=s.exports.useState(H),g=async({email:o,password:b})=>{const m=await i(y(new C({email:o,password:b})));if(m.payload instanceof L){const k=m.payload.detail;l(w=>({...w,isOpen:!0,message:k}));return}p("/")},S=()=>{l(o=>({...o,isOpen:!1}))};s.exports.useEffect(()=>{i(N())},[]);const c=B({initialValues:R,validationSchema:j,onSubmit:g});return s.exports.useEffect(()=>{n&&f(!1)},[c.values]),r("div",{className:a.auth,children:[r(O,{children:[e("h1",{className:a.auth__title,children:"Welcome to Saritasa Anime"}),e(F,{value:c,children:r(q,{className:a.auth__form,children:[e(u,{label:"Email",name:"email",type:"email"}),e(u,{label:"Password",name:"password",type:"password"}),n&&e("span",{className:a.auth__error,children:h?.detail}),r("p",{children:["Don't have an account?"," ",e(x,{className:a.auth__link,to:"/register",children:"Register now!"})," "]}),e(P,{type:"submit",children:"Login"})]})})]}),e(D,{open:t.isOpen,autoHideDuration:t.duration,onClose:S,message:t.message})]})};export{M as LoginPage};
