import{$ as E,q as _,x as v,a0 as x,r as s,a1 as A,o as r,j as a,L as N,a2 as y,a3 as C,a4 as L}from"./index.78b97092.js";import{c as I,a as d,u as q,s as e,C as B,F,b as D,d as u,S as O}from"./object.cf2f39ab.js";import{B as P}from"./TextField.6b9124af.js";const j=I().shape({email:d().email("This field has to be an email!").required("Email is required!"),password:d().required("Password is required!")}),H={isOpen:!1,message:"",duration:3e3},R={email:"",password:""},K=()=>{const p=E(),i=_(),h=v(x),[n,f]=s.exports.useState(!1),[t,l]=s.exports.useState(H),g=async({email:o,password:b})=>{const m=await i(y(new C({email:o,password:b})));if(m.payload instanceof L){const k=m.payload.detail;l(w=>({...w,isOpen:!0,message:k}));return}p("/")},S=()=>{l(o=>({...o,isOpen:!1}))};s.exports.useEffect(()=>{i(A())},[]);const c=q({initialValues:R,validationSchema:j,onSubmit:g});return s.exports.useEffect(()=>{n&&f(!1)},[c.values]),r("div",{className:e.auth,children:[r(B,{children:[a("h1",{className:e.auth__title,children:"Welcome to Saritasa Anime"}),a(F,{value:c,children:r(D,{className:e.auth__form,children:[a(u,{label:"Email",name:"email",type:"email"}),a(u,{label:"Password",name:"password",type:"password"}),n&&a("span",{className:e.auth__error,children:h?.detail}),r("p",{children:["Don't have an account?"," ",a(N,{className:e.auth__link,to:"/register",children:"Register now!"})," "]}),a(P,{type:"submit",children:"Login"})]})})]}),a(O,{open:t.isOpen,autoHideDuration:t.duration,onClose:S,message:t.message})]})};export{K as LoginPage};
