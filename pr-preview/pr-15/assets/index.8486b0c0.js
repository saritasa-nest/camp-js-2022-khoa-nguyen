import{l as E,u as _,e as v,m as A,r as s,n as N,a as r,j as e,L as x,o as y,p as C,H as L}from"./index.48d8b070.js";import{c as I,a as d,u as F,s as a,C as q,F as B,b as D,d as u,S as O}from"./auth.module.6e078b23.js";import{r as P}from"./ListContext.f9194e72.js";const j=I().shape({email:d().email("This field has to be an email!").required("Email is required!"),password:d().required("Password is required!")}),H={isOpen:!1,message:"",duration:3e3},R={email:"",password:""},M=()=>{const p=E(),i=_(),h=v(A),[n,f]=s.exports.useState(!1),[t,l]=s.exports.useState(H),g=async({email:o,password:b})=>{const m=await i(y(new C({email:o,password:b})));if(m.payload instanceof L){const k=m.payload.detail;l(w=>({...w,isOpen:!0,message:k}));return}p("/")},S=()=>{l(o=>({...o,isOpen:!1}))};s.exports.useEffect(()=>{i(N())},[]);const c=F({initialValues:R,validationSchema:j,onSubmit:g});return s.exports.useEffect(()=>{n&&f(!1)},[c.values]),r("div",{className:a.auth,children:[r(q,{children:[e("h1",{className:a.auth__title,children:"Welcome to Saritasa Anime"}),e(B,{value:c,children:r(D,{className:a.auth__form,children:[e(u,{label:"Email",name:"email",type:"email"}),e(u,{label:"Password",name:"password",type:"password"}),n&&e("span",{className:a.auth__error,children:h?.detail}),r("p",{children:["Don't have an account?"," ",e(x,{className:a.auth__link,to:"/register",children:"Register now!"})," "]}),e(P,{type:"submit",children:"Login"})]})})]}),e(O,{open:t.isOpen,autoHideDuration:t.duration,onClose:S,message:t.message})]})};export{M as LoginPage};
